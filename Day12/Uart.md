پروتکل سریال 
UART (Universal Asynchronous Receiver/Transmitter)
 یکی از پروتکل‌های رایج در ارتباطات سریال است که برای انتقال و دریافت داده‌ها بین دستگاه‌های مختلف الکترونیکی استفاده می‌شود. در اینجا به توضیح چگونگی کارکرد و ویژگی‌های این پروتکل به زبان فارسی می‌پردازیم.

### تعریف و کارکرد UART
UART
 یک مدار مجتمع است که وظیفه‌ی تبدیل داده‌های موازی به سریال و بالعکس را بر عهده دارد. این پروتکل به صورت ناهمگام 
 (Asynchronous)
  عمل می‌کند، به این معنی که نیازی به ساعت مشترک 
(Clock)
 بین فرستنده و گیرنده ندارد.

### اجزای اصلی پروتکل UART
1. **فرستنده (Transmitter):** داده‌ها را از دستگاه مبدا دریافت کرده و آن‌ها را به صورت بیت‌های سریال ارسال می‌کند.
2. **گیرنده (Receiver):** بیت‌های سریال را دریافت کرده و آن‌ها را به داده‌های موازی تبدیل می‌کند.

### چگونگی کارکرد UART
1. **سرعت انتقال (Baud Rate):** سرعت انتقال داده‌ها در 
UART
 با نرخ‌بیت 
(Baud Rate) تعیین می‌شود. برای مثال، 9600
 baud
  به این معناست که 
 9600
  بیت در ثانیه منتقل می‌شود.
2. **بیت‌های داده:** 
معمولاً بین 5
 تا 9 
بیت داده در هر فریم 
(Frame)
 قرار می‌گیرد.
3. **بیت شروع (Start Bit):** قبل از ارسال هر فریم، یک بیت شروع 
(Start Bit)
 اضافه می‌شود که نشان‌دهنده‌ی آغاز فریم است.
4. **بیت‌های توقف (Stop Bit):** بعد از بیت‌های داده، بیت‌های توقف 
(Stop Bit)
 قرار می‌گیرند که پایان فریم را مشخص می‌کنند. معمولاً یک یا دو بیت توقف استفاده می‌شود.
5. **بیت توازن (Parity Bit):** اختیاری است و برای تشخیص خطا در انتقال داده استفاده می‌شود. انواع توازن شامل 
Even (توازن زوج)، 
Odd (توازن فرد) و 
None (بدون توازن) است.

### مثال از ساختار یک فریم UART
فرض کنید نرخ‌بیت 
9600 
است، بیت‌های داده 
8،
 بیت توازن 
None 
و بیت‌های توقف 1 باشد. ساختار فریم به این شکل خواهد بود:

```
| Start Bit | Data Bits (8 bits) | Stop Bit |
|     0     |  11010010          |    1     |
```

### مزایا و معایب پروتکل UART
**مزایا:**
- ساده و ارزان.
- عدم نیاز به ساعت مشترک.
- انعطاف‌پذیری بالا در تنظیمات.

**معایب:**
- طول کابل محدود.
- سرعت انتقال نسبتاً پایین.
- امکان خطا در انتقال به دلیل عدم استفاده از ساعت مشترک.

### کاربردهای UART
- ارتباط بین میکروکنترلرها و رایانه‌ها.
- ماژول‌های GPS.
- ماژول‌های بلوتوث.
- سنسورها و دستگاه‌های اندازه‌گیری.

### نتیجه‌گیری
پروتکل 
UART
 یکی از پروتکل‌های مهم و پرکاربرد در ارتباطات سریال است که با توجه به سادگی و قابلیت اطمینانش، در بسیاری از پروژه‌های الکترونیکی و میکروکنترلری مورد استفاده قرار می‌گیرد. با تنظیم درست پارامترها مانند نرخ‌بیت و بیت‌های داده، می‌توان ارتباط سریال مطمئن و کارآمدی را بین دستگاه‌های مختلف برقرار کرد.

برای اینکه بتوانید داده‌های انتقالی از طریق 
UART
 را در نرم‌افزار 
PuTTY
 روی کامپیوترتان ببینید، نیاز به یک مبدل 
USB
 به سریال دارید. این مبدل‌ها معمولاً از چیپ‌هایی مانند 
FTDI، CH340 یا PL2303
 استفاده می‌کنند. در اینجا دلیل و نحوه کارکرد آن را توضیح می‌دهم.

چرا نمی‌توانید داده‌های 
UART
 را مستقیماً ببینید
اگر شما پین‌های 
A2 و A3
 را به عنوان 
RX و TX
 تعریف کرده‌اید، این‌ها پین‌های سریال میکروکنترلر شما هستند. وقتی شما از کابل 
 USB
  استفاده می‌کنید، این کابل به طور معمول داده‌ها را به صورت 
 USB
  به کامپیوتر انتقال می‌دهد، نه به صورت سیگنال‌های سریال.

مبدل 
USB به سریال
برای اینکه بتوانید داده‌های سریال 
(UART)
 را روی کامپیوتر ببینید، نیاز به یک مبدل 
 USB
  به سریال دارید. این مبدل‌ها داده‌های سریال را به داده‌های 
 USB
  تبدیل می‌کنند و برعکس. به این ترتیب، وقتی شما داده‌ها را از طریق پین‌های سریال میکروکنترلر ارسال می‌کنید، این مبدل آن‌ها را به داده‌های 
 USB
  تبدیل کرده و به کامپیوتر می‌فرستد. کامپیوتر این داده‌ها را به صورت داده‌های سریال دریافت می‌کند و شما می‌توانید آن‌ها را در نرم‌افزارهایی مانند 
 PuTTY
  مشاهده کنید.

  ### نتیجه‌گیری
بنابراین، اگر شما می‌توانید داده‌های 
UART
 را در 
 PuTTY
  ببینید بدون اینکه پین‌های 
  A2 و A3 را به پورت 
  USB به سریال متصل کنید، احتمالاً میکروکنترلر شما دارای مبدل داخلی 
  USB به سریال است که به طور خودکار سیگنال‌های سریال را به 
  USB تبدیل می‌کند و آن‌ها را به کامپیوتر منتقل می‌کند. این قابلیت به شما اجازه می‌دهد تا بدون نیاز به مبدل جداگانه، داده‌های سریال خود را مشاهده و با دستگاه‌های دیگر ارتباط برقرار کنید.

  برای اینکه دو دستگاه بتوانند از طریق UART با هم ارتباط برقرار کنند، لازم است که هر دو دستگاه دارای یک مرجع مشترک برای ولتاژ باشند. این مرجع مشترک همان اتصال زمین یا **GND** است. در اینجا دلایل اهمیت اتصال دو GND با هم را توضیح می‌دهم:

### اهمیت اتصال GND‌ها در UART:

1. **مرجع ولتاژ مشترک**:
   - در ارتباط 
   UART
    سیگنال‌های ارسالی و دریافتی بر اساس تفاوت ولتاژ بین پایه‌های 
    TX و RX 
    و مرجع زمین 
    (GND)
     اندازه‌گیری می‌شوند. اگر دو دستگاه مرجع زمین مشترک نداشته باشند، تفاوت ولتاژ به درستی اندازه‌گیری نمی‌شود و داده‌ها به درستی تفسیر نخواهند شد.

2. **پیشگیری از نویز و تداخل**:
   - اتصال GND‌ها باعث می‌شود تا نویزها و تداخلات الکتریکی کاهش یابد. وقتی دو دستگاه دارای مرجع زمین مشترک باشند، ولتاژهای ناخواسته و تداخلات به حداقل می‌رسند و داده‌ها با دقت بیشتری منتقل می‌شوند.

3. **عملکرد صحیح مدار**:
   - برای اینکه مدار الکتریکی به درستی کار کند، نیاز است که تمامی اجزا و دستگاه‌ها به یک مرجع ولتاژ واحد متصل باشند. در غیر این صورت، ممکن است مشکلاتی مانند کاهش دقت، نویز بالا و حتی خرابی مدار رخ دهد.

### نحوه اتصال GND‌ها:

1. **پایه GND دستگاه اول**:
   - پایه GND میکروکنترلر یا دستگاه فرستنده (مثلاً STM32).

2. **پایه GND دستگاه دوم**:
   - پایه GND دستگاه گیرنده (مثلاً ESP32).

با اتصال این دو پایه GND به هم، هر دو دستگاه دارای مرجع ولتاژ مشترک خواهند بود و می‌توانند به درستی از طریق UART با هم ارتباط برقرار کنند.

### مثال عملی:

- فرض کنید پایه GND میکروکنترلر STM32 را به پایه GND ESP32 متصل می‌کنید. حالا وقتی STM32 داده‌ای را از طریق TX به RX ESP32 ارسال می‌کند، هر دو دستگاه از یک مرجع ولتاژ مشترک استفاده می‌کنند و داده‌ها به درستی تفسیر می‌شوند.

### نتیجه‌گیری:

اتصال GND‌ها یک ضرورت اساسی برای اطمینان از عملکرد صحیح و دقیق ارتباط UART است. با داشتن مرجع ولتاژ مشترک، دستگاه‌ها می‌توانند بدون هیچ مشکلی داده‌ها را به درستی ارسال و دریافت کنند.
بله، پروتکل‌های I2C و SPI نیز نیاز به اتصال GND مشترک دارند، مشابه UART. در اینجا توضیح می‌دهم که چرا اتصال GND‌ها در این پروتکل‌ها ضروری است:

### اهمیت اتصال GND‌ها در I2C و SPI

#### 1. **I2C (Inter-Integrated Circuit)**

در پروتکل I2C، دو سیم اصلی برای ارتباط داده‌ها وجود دارد:
- **SDA (Serial Data Line)**: خط داده سریال
- **SCL (Serial Clock Line)**: خط کلاک سریال

**دلیل نیاز به اتصال GND‌ها**:
- **مرجع ولتاژ مشترک**: همانند UART، دستگاه‌های متصل به I2C باید یک مرجع ولتاژ مشترک داشته باشند تا تفاوت‌های ولتاژی بین SDA و SCL به درستی اندازه‌گیری شود.
- **پیشگیری از نویز و تداخل**: با داشتن GND مشترک، احتمال نویز و تداخل در سیگنال‌های داده و کلاک کاهش می‌یابد.

#### 2. **SPI (Serial Peripheral Interface)**

در پروتکل SPI، چهار سیم اصلی وجود دارد:
- **MOSI (Master Out Slave In)**: خط داده خروجی از مستر به اسلیو
- **MISO (Master In Slave Out)**: خط داده ورودی به مستر از اسلیو
- **SCK (Serial Clock)**: خط کلاک سریال
- **SS/CS (Slave Select/Chip Select)**: خط انتخاب اسلیو

**دلیل نیاز به اتصال GND‌ها**:
- **مرجع ولتاژ مشترک**: برای اطمینان از اینکه سیگنال‌ها به درستی از مستر به اسلیو و بالعکس منتقل می‌شوند، باید GND مشترک وجود داشته باشد.
- **پیشگیری از نویز و تداخل**: داشتن مرجع ولتاژ مشترک باعث کاهش نویز و تداخل در سیگنال‌های داده و کلاک می‌شود.

### نحوه اتصال GND‌ها

1. **پایه GND دستگاه مستر**:
   - پایه GND میکروکنترلر یا دستگاه مستر (مثلاً Arduino، Raspberry Pi، STM32).

2. **پایه GND دستگاه اسلیو**:
   - پایه GND دستگاه اسلیو (مثلاً سنسورها، ماژول‌های ارتباطی، ESP32).

با اتصال این پایه‌های GND به هم، هر دو دستگاه دارای مرجع ولتاژ مشترک خواهند بود و می‌توانند به درستی با هم ارتباط برقرار کنند.

### نتیجه‌گیری:

اتصال GND‌ها در پروتکل‌های I2C و SPI به همان اندازه که در UART اهمیت دارد، حیاتی است. با داشتن مرجع ولتاژ مشترک، دستگاه‌ها می‌توانند بدون هیچ مشکلی داده‌ها را به درستی ارسال و دریافت کنند و نویز و تداخل‌ها به حداقل می‌رسند.